/* ==========================================================================
   CSS FINAL v3 - Correção Definitiva do Seletor de Tema
   ========================================================================== */

/* --- VARIÁVEIS DE TEMA --- */
:root { /* ... (variáveis de cor permanecem as mesmas) ... */ }
[data-theme='light'] { /* ... */ }
[data-theme='dark'] { /* ... */ }
/* (Copie as seções de variáveis da resposta anterior, elas estão corretas) */
:root {
    --light-bg: #F9FAFB;
    --light-surface: #FFFFFF;
    --light-border: #E5E7EB;
    --light-text-primary: #1F2937;
    --light-text-secondary: #6B7280;
    --dark-bg: #18181B;
    --dark-surface: #27272A;
    --dark-border: #3F3F46;
    --dark-text-primary: #F4F4F5;
    --dark-text-secondary: #A1A1AA;
    --primary-color: #3B82F6;
    --success-color: #22C55E;
    --header-height: 80px;
}

[data-theme='light'] {
    --color-bg: var(--light-bg);
    --color-surface: var(--light-surface);
    --color-border: var(--light-border);
    --color-text-primary: var(--light-text-primary);
    --color-text-secondary: var(--light-text-secondary);
}

[data-theme='dark'] {
    --color-bg: var(--dark-bg);
    --color-surface: var(--dark-surface);
    --color-border: var(--dark-border);
    --color-text-primary: var(--dark-text-primary);
    --color-text-secondary: var(--dark-text-secondary);
}

/* --- ESTILOS GLOBAIS --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body { 
    font-family: 'Space Grotesk', sans-serif; 
    background-color: var(--color-bg); 
    color: var(--color-text-primary); 
    line-height: 1.6;
    transition: background-color 0.3s, color 0.3s;
}
.container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
main { padding-top: var(--header-height); }

/* --- NAVEGAÇÃO E SELETOR DE TEMA --- */
.main-header {
    background-color: color-mix(in srgb, var(--color-surface), transparent 5%);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--color-border);
    height: var(--header-height);
    display: flex;
    align-items: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
}
.main-header .container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
.logo { font-size: 1.5rem; font-weight: 700; text-decoration: none; color: var(--color-text-primary); }
.main-nav { display: flex; align-items: center; gap: 20px; }
.nav-links { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
.nav-links a { color: var(--color-text-secondary); text-decoration: none; font-weight: 500; font-size: 1rem; position: relative; padding: 5px 0; transition: color 0.2s ease; }
.nav-links a:hover { color: var(--color-text-primary); }
.nav-links a.active { color: var(--color-text-primary); font-weight: 700; }

/* Seletor de Tema com Estrutura Corrigida */
.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
.slider { cursor: pointer; width: 50px; height: 26px; background-color: var(--color-border); border-radius: 26px; position: relative; transition: background-color 0.3s; display: flex; align-items: center; justify-content: space-between; padding: 0 4px; }
.slider .icon { color: var(--primary-color); }
.slider::before { content: ''; position: absolute; top: 3px; left: 4px; width: 20px; height: 20px; background-color: white; border-radius: 50%; transition: transform 0.3s ease-out; }

/* A MÁGICA ACONTECE AQUI: A aparência do switch depende do ESTADO do checkbox, não do TEMA */
#theme-toggle:checked + .slider::before {
    transform: translateX(23px);
}

.nav-toggle { display: none; background: none; border: none; font-size: 1.5rem; color: var(--color-text-primary); cursor: pointer; z-index: 1001; }

/* Resto do CSS... */
.hero { display: flex; align-items: center; padding: 40px 20px; background-color: var(--color-surface); border-bottom: 1px solid var(--color-border); }
.hero-container { display: flex; align-items: center; gap: 40px; }
.hero-text { flex: 1; text-align: left; }
.hero-text h1 { color: var(--color-text-primary); font-size: 2.8rem; }
.hero-text .subtitle { color: var(--color-text-secondary); font-size: 1.1rem; }
.hero-image { flex: 1; text-align: right; }
.hero-image img { max-width: 100%; height: auto; }
.progress-container { margin-top: 25px; }
.progress-bar-background { width: 100%; background-color: var(--color-border); border-radius: 10px; height: 12px; overflow: hidden; }
.progress-bar { height: 100%; width: 0%; background-color: var(--success-color); border-radius: 10px; transition: width 0.4s ease-in-out; }
#progressText { display: block; margin-top: 8px; font-size: 0.9rem; color: var(--color-text-secondary); }
.week-section { padding: 60px 20px; }
.week-section h2 { font-size: 2rem; font-weight: 700; margin-bottom: 30px; padding-bottom: 10px; border-bottom: 1px solid var(--color-border); }
.challenge-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
.challenge-card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; position: relative; aspect-ratio: 1 / 1; overflow: hidden; transition: border-color 0.3s ease, transform 0.3s ease; }
.challenge-card:hover { transform: translateY(-5px); border-color: var(--primary-color); }
.challenge-link { text-decoration: none; color: inherit; display: flex; flex-direction: column; height: 100%; }
.card-illustration { height: 65%; width: 100%; object-fit: cover; background-color: var(--color-border); }
.challenge-info { flex-grow: 1; padding: 15px; display: flex; align-items: center; }
.challenge-info h3 { color: var(--color-text-primary); font-size: 1.1rem; font-weight: 500; line-height: 1.3; }
.challenge-info .day-number { background-color: var(--color-border); color: var(--color-text-secondary); padding: 3px 10px; border-radius: 6px; font-size: 0.8rem; font-weight: 700; margin-right: 10px; }
.complete-btn { position: absolute; top: 12px; right: 12px; background: color-mix(in srgb, var(--color-surface), transparent 30%); backdrop-filter: blur(4px); border: 1px solid var(--color-border); color: var(--color-text-secondary); border-radius: 50%; width: 36px; height: 36px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; z-index: 2; }
.complete-btn:hover { background: var(--color-border); color: var(--color-text-primary); }
.challenge-card.completed { border-color: var(--success-color); }
.challenge-card.completed::after { content: '✔'; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(34, 197, 94, 0.7); color: white; font-size: 80px; display: flex; justify-content: center; align-items: center; z-index: 1; pointer-events: none; }
.challenge-card.completed .complete-btn { background-color: var(--success-color); border-color: var(--success-color); color: white; }
.content-page { padding: 60px 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
.content-page h1, .content-page h2 { color: var(--color-text-primary); }
.content-page h1 { font-size: 2.8rem; }
.content-page h2 { font-size: 1.8rem;}
.content-page .subtitle { font-size: 1.2rem; color: var(--color-text-secondary); margin-bottom: 40px; }
.content-page p { color: var(--color-text-secondary); line-height: 1.8; }
.content-image { max-width: 100%; border-radius: 8px; margin: 20px 0; }
.intro-content .intro-text h3 { margin-top: 30px; }
footer { text-align: center; padding: 40px 20px; color: var(--color-text-secondary); font-size: 0.9rem; border-top: 1px solid var(--color-border); }
.attribution { font-size: 0.8rem; }
.attribution a { color: var(--primary-color); text-decoration: none; }
.attribution a:hover { text-decoration: underline; }

@media (max-width: 768px) {
    .main-nav { gap: 15px; }
    .nav-toggle { display: block; }
    .nav-links { position: fixed; top: var(--header-height); left: -100%; width: 100%; height: calc(100vh - var(--header-height)); background-color: var(--color-surface); flex-direction: column; align-items: center; gap: 0; padding: 40px 0; transition: left 0.4s ease-in-out; }
    .nav-links.active { left: 0; }
    .nav-links li { width: 100%; text-align: center; }
    .nav-links a { display: block; padding: 15px 0; width: 100%; font-size: 1.2rem; }
    .nav-links a:hover, .nav-links a.active { background-color: var(--color-border); }
    .hero-container { flex-direction: column-reverse; text-align: center; }
    .hero-text { text-align: center; }
    .hero-text h1 { font-size: 2.2rem; }
}

/* --- ESTILOS ADICIONAIS PARA PÁGINAS DE CONTEÚDO --- */
.content-page .challenge-content {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 1px solid var(--color-border);
}

.challenge-content h2 {
    font-size: 1.8rem;
    margin-bottom: 16px;
    color: var(--color-text-primary);
}

.challenge-content p, .challenge-content li {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--color-text-secondary);
    margin-bottom: 16px;
}

.challenge-content ul {
    list-style-position: inside;
    padding-left: 20px;
}

.challenge-content a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
}

.challenge-content a:hover {
    text-decoration: underline;
}

.challenge-content .content-image {
    width: 100%;
    max-width: 100%;
    border-radius: 12px;
    margin: 24px 0;
    border: 1px solid var(--color-border);
}

/* Estilo para o bloco da tarefa final */
/* Estilo para o bloco da tarefa final com borda animada */
.challenge-task {
    position: relative; /* Necessário para a borda animada */
    margin-top: 40px;
    padding: 30px;
    border-radius: 12px;
    background-color: var(--color-surface);

    /* Removemos a borda sólida anterior, pois a animação a substitui */
    border: none;
}

/* A borda animada */
.challenge-task::before {
    content: '';
    position: absolute;
    z-index: -1;
    top: -2px; 
    left: -2px;
    right: -2px;
    bottom: -2px;
    
    background: conic-gradient(
        from var(--angle),
        var(--color-surface), /* Começa e termina com a cor de fundo para suavizar */
        var(--primary-color),
        color-mix(in srgb, var(--primary-color), #8B5CF6), /* Mistura um roxo para brilho extra */
        var(--primary-color),
        var(--color-surface)
    );

    border-radius: inherit;
    animation: spin 4s linear infinite;
}

/* Estilos para o conteúdo dentro do bloco da tarefa */
.challenge-task h2 {
    font-size: 1.8rem;
    color: var(--color-text-primary);
    margin-bottom: 16px;
}

/* --- ESTILOS PARA VÍDEOS EMBUTIDOS --- */
.video-container {
    margin: 40px 0;
}

.video-container h3 {
    margin-bottom: 16px;
    font-size: 1.5rem;
    color: var(--color-text-primary);
}

.video-container iframe {
    width: 100%;
    aspect-ratio: 16 / 9; /* Mantém a proporção do vídeo */
    border-radius: 12px;
    border: 1px solid var(--color-border);
}

/* Estilo para o link de "voltar" nas páginas de desafio */
.back-link {
    display: inline-block;
    margin-bottom: 24px;
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
}

.back-link:hover {
    color: var(--primary-color);
    text-decoration: underline;
}
/* ==========================================================================
   Animação da Borda Brilhante
   ========================================================================== */
@property --angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

@keyframes spin {
  to {
    --angle: 360deg;
  }
}

/* O resto do seu CSS começa aqui... */
:root {
    /* ... */
}